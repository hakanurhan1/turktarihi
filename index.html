<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÃ¼rk Tarihi Pro</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Merriweather:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, h4 { font-family: 'Merriweather', serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Animasyonlar */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-slide-up { animation: slideUp 0.5s ease-out; }

        /* MÃ¼zik Ã‡alar Animasyonu */
        @keyframes pulse-ring {
            0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(234, 88, 12, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(234, 88, 12, 0); }
            100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(234, 88, 12, 0); }
        }
        .music-playing { animation: pulse-ring 2s infinite; }
        
        /* Equalizer Bar Animasyonu */
        @keyframes equalizer {
            0% { height: 3px; }
            50% { height: 15px; }
            100% { height: 3px; }
        }
        .eq-bar { width: 3px; background-color: #fff; margin: 0 1px; animation: equalizer 1s infinite; }
        .eq-bar:nth-child(2) { animation-delay: 0.2s; }
        .eq-bar:nth-child(3) { animation-delay: 0.4s; }
    </style>
</head>
<body class="bg-slate-50 text-gray-800 selection:bg-red-100 selection:text-red-900 min-h-screen">

    <!-- Arkaplan Deseni -->
    <div class="fixed inset-0 z-0 pointer-events-none">
        <div class="absolute inset-0 bg-gradient-to-br from-amber-50 via-red-50 to-teal-50 opacity-60"></div>
        <div class="absolute inset-0 opacity-[0.07]" style="background-image: url('data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cg fill=\'none\' fill-rule=\'evenodd\'%3E%3Cg fill=\'%23d97706\' fill-opacity=\'1\'%3E%3Cpath d=\'M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z\'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E')"></div>
    </div>

    <!-- Ana Konteyner -->
    <div class="max-w-md mx-auto md:max-w-4xl min-h-screen relative flex flex-col z-10">
        
        <!-- Header -->
        <header class="sticky top-0 z-40 px-6 py-4 transition-all duration-300 bg-white/80 backdrop-blur-xl border-b border-white/20 shadow-sm md:rounded-b-3xl md:mt-2 md:mx-2">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3 group cursor-pointer" onclick="renderTab('home')">
                    <div class="bg-gradient-to-tr from-red-600 to-rose-500 text-white p-2.5 rounded-xl shadow-lg shadow-red-200 group-hover:rotate-12 transition-transform duration-300">
                        <!-- SelÃ§uklu YÄ±ldÄ±zÄ± SVG -->
                        <svg viewBox="0 0 24 24" class="w-5 h-5 fill-current text-white" style="opacity: 0.9">
                            <path d="M12 0L14.8 9.2L24 12L14.8 14.8L12 24L9.2 14.8L0 12L9.2 9.2L12 0Z" />
                            <circle cx="12" cy="12" r="3" class="fill-white opacity-30" />
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-900 leading-none">TÃ¼rk Tarihi</h1>
                        <p class="text-[10px] text-gray-400 font-bold tracking-[0.2em] mt-1">PRO</p>
                    </div>
                </div>
                
                <!-- Desktop Nav -->
                <div class="hidden md:flex gap-1">
                    <button onclick="renderTab('home')" class="nav-btn-desktop px-3 py-2 rounded-xl text-xs font-bold transition-all hover:bg-gray-100 text-gray-500" data-tab="home">TarihÃ§e</button>
                    <button onclick="renderTab('states')" class="nav-btn-desktop px-3 py-2 rounded-xl text-xs font-bold transition-all hover:bg-gray-100 text-gray-500" data-tab="states">Devletler</button>
                    <button onclick="renderTab('leaders')" class="nav-btn-desktop px-3 py-2 rounded-xl text-xs font-bold transition-all hover:bg-gray-100 text-gray-500" data-tab="leaders">Liderler</button>
                    <button onclick="renderTab('mythology')" class="nav-btn-desktop px-3 py-2 rounded-xl text-xs font-bold transition-all hover:bg-gray-100 text-gray-500" data-tab="mythology">Mitoloji</button>
                    <button onclick="renderTab('art')" class="nav-btn-desktop px-3 py-2 rounded-xl text-xs font-bold transition-all hover:bg-gray-100 text-gray-500" data-tab="art">KÃ¼ltÃ¼r</button>
                    <button onclick="renderTab('quiz')" class="nav-btn-desktop px-3 py-2 rounded-xl text-xs font-bold transition-all hover:bg-gray-100 text-gray-500" data-tab="quiz">YarÄ±ÅŸma</button>
                </div>
            </div>
        </header>

        <!-- Ä°Ã§erik AlanÄ± -->
        <main id="main-content" class="p-6 md:p-8 flex-grow pb-28">
            <!-- Ä°Ã§erik JS ile buraya doldurulacak -->
        </main>

        <!-- Mobil Alt Navigasyon -->
        <nav class="fixed bottom-4 left-4 right-4 md:hidden z-40">
            <div class="bg-gray-900/95 backdrop-blur-lg text-white rounded-2xl shadow-2xl shadow-gray-900/40 p-1 flex justify-between items-center border border-white/10 overflow-x-auto">
                <button onclick="renderTab('home')" class="nav-btn-mobile flex flex-col items-center justify-center min-w-[60px] h-14 rounded-xl transition-colors" data-tab="home">
                    <i data-lucide="book" class="w-5 h-5 mb-0.5"></i><span class="text-[9px] font-bold">Tarih</span>
                </button>
                <button onclick="renderTab('states')" class="nav-btn-mobile flex flex-col items-center justify-center min-w-[60px] h-14 rounded-xl transition-colors" data-tab="states">
                    <i data-lucide="landmark" class="w-5 h-5 mb-0.5"></i><span class="text-[9px] font-bold">Devlet</span>
                </button>
                <button onclick="renderTab('leaders')" class="nav-btn-mobile flex flex-col items-center justify-center min-w-[60px] h-14 rounded-xl transition-colors" data-tab="leaders">
                    <i data-lucide="crown" class="w-5 h-5 mb-0.5"></i><span class="text-[9px] font-bold">Lider</span>
                </button>
                <button onclick="renderTab('mythology')" class="nav-btn-mobile flex flex-col items-center justify-center min-w-[60px] h-14 rounded-xl transition-colors" data-tab="mythology">
                    <i data-lucide="moon" class="w-5 h-5 mb-0.5"></i><span class="text-[9px] font-bold">Mit</span>
                </button>
                <button onclick="renderTab('art')" class="nav-btn-mobile flex flex-col items-center justify-center min-w-[60px] h-14 rounded-xl transition-colors" data-tab="art">
                    <i data-lucide="palette" class="w-5 h-5 mb-0.5"></i><span class="text-[9px] font-bold">Sanat</span>
                </button>
                <button onclick="renderTab('quiz')" class="nav-btn-mobile flex flex-col items-center justify-center min-w-[60px] h-14 rounded-xl transition-colors" data-tab="quiz">
                    <i data-lucide="help-circle" class="w-5 h-5 mb-0.5"></i><span class="text-[9px] font-bold">Quiz</span>
                </button>
            </div>
        </nav>

        <!-- MÃ¼zik OtaÄŸÄ± (Floating Player) -->
        <div class="fixed bottom-24 right-4 z-50 md:bottom-8 md:right-8">
            <!-- Player Panel -->
            <div id="music-panel" class="hidden absolute bottom-16 right-0 w-64 bg-gray-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 p-4 text-white transform transition-all duration-300 origin-bottom-right scale-95 opacity-0">
                <div class="flex justify-between items-center mb-4 border-b border-white/10 pb-2">
                    <h4 class="font-bold text-sm flex items-center gap-2 text-amber-400"><i data-lucide="music" class="w-4 h-4"></i> MÃ¼zik OtaÄŸÄ±</h4>
                    <button onclick="toggleMusicPanel()" class="hover:bg-white/10 rounded-full p-1"><i data-lucide="x" class="w-4 h-4"></i></button>
                </div>
                
                <!-- Åu an Ã‡alan -->
                <div class="mb-4 bg-white/5 rounded-xl p-3 flex items-center gap-3">
                    <div id="music-cover" class="w-10 h-10 bg-gradient-to-br from-amber-500 to-red-600 rounded-lg flex items-center justify-center shadow-lg">
                        <i data-lucide="disc" class="w-6 h-6 text-white animate-spin-slow"></i>
                    </div>
                    <div class="flex-1 overflow-hidden">
                        <div id="current-song-title" class="text-xs font-bold truncate">SeÃ§im YapÄ±lmadÄ±</div>
                        <div class="text-[10px] text-gray-400">DestansÄ± MÃ¼zikler</div>
                    </div>
                    <!-- Equalizer -->
                    <div id="equalizer" class="hidden h-4 items-end gap-0.5">
                        <div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div>
                    </div>
                </div>

                <!-- Playlist -->
                <div class="space-y-1 max-h-40 overflow-y-auto scrollbar-hide" id="playlist-container">
                    <!-- JS ile dolacak -->
                </div>

                <!-- Kontroller -->
                <div class="mt-3 flex justify-center items-center gap-4 pt-2 border-t border-white/10">
                    <button onclick="prevSong()" class="hover:text-amber-400"><i data-lucide="skip-back" class="w-5 h-5"></i></button>
                    <button onclick="togglePlay()" class="w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center hover:bg-amber-400 text-black shadow-lg shadow-amber-500/20">
                        <i id="play-icon" data-lucide="play" class="w-5 h-5 fill-current ml-0.5"></i>
                    </button>
                    <button onclick="nextSong()" class="hover:text-amber-400"><i data-lucide="skip-forward" class="w-5 h-5"></i></button>
                </div>
                
                <audio id="bg-audio"></audio>
            </div>

            <!-- Floating Button -->
            <button onclick="toggleMusicPanel()" id="music-fab" class="bg-gradient-to-r from-amber-500 to-red-600 w-14 h-14 rounded-full shadow-2xl flex items-center justify-center text-white hover:scale-110 transition-transform duration-300 border-4 border-white/20">
                <i data-lucide="music" class="w-6 h-6"></i>
            </button>
        </div>

    </div>

    <!-- Modallar (Gizli) -->
    <div id="modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm hidden opacity-0 transition-opacity duration-300" onclick="closeModal(event)">
        <div id="modal-content" class="bg-white rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden flex flex-col max-h-[85vh] relative transform scale-95 transition-transform duration-300" onclick="event.stopPropagation()">
            <!-- Modal Header -->
            <div id="modal-header" class="p-6 flex justify-between items-start text-white relative overflow-hidden shrink-0">
                <div class="absolute top-0 right-0 p-4 opacity-20 transform translate-x-4 -translate-y-4">
                    <div class="flex gap-1.5 items-center justify-center font-serif font-bold text-white select-none">
                        <div class="w-1.5 h-8 bg-current rounded-full"></div>
                        <div class="w-1.5 h-5 bg-current rounded-full rotate-45 origin-bottom"></div>
                        <div class="w-1.5 h-8 bg-current rounded-full"></div>
                    </div>
                </div>
                <div class="relative z-10 flex items-center gap-3">
                    <div class="p-2 bg-white/20 rounded-lg backdrop-blur-sm">
                        <svg viewBox="0 0 24 24" class="w-6 h-6 fill-current text-white opacity-90">
                            <path d="M12 0L14.8 9.2L24 12L14.8 14.8L12 24L9.2 14.8L0 12L9.2 9.2L12 0Z" />
                        </svg>
                    </div>
                    <div>
                        <h3 id="modal-title" class="font-bold font-serif text-2xl tracking-wide">BaÅŸlÄ±k</h3>
                        <div class="h-1 w-12 bg-amber-400 mt-2 rounded-full shadow-sm"></div>
                    </div>
                </div>
                <button onclick="closeModal()" class="p-2 hover:bg-white/20 rounded-full transition-colors z-20">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <!-- Modal Body -->
            <div id="modal-body" class="p-6 overflow-y-auto custom-scrollbar bg-slate-50/50">
                <!-- Ä°Ã§erik buraya gelecek -->
            </div>
        </div>
    </div>

    <script>
        // --- VERÄ° SETLERÄ° ---
        const historicQuotes = [
            { text: "TÃ¼rk OÄŸuz Beyleri, milleti, iÅŸitin! Ãœstte mavi gÃ¶k Ã§Ã¶kmedikÃ§e, altta yaÄŸÄ±z yer delinmedikÃ§e, senin ilini ve tÃ¶reni kim bozabilir?", author: "Bilge KaÄŸan" },
            { text: "Benden eÄŸerimi isteyin vereyim, atÄ±mÄ± isteyin vereyim, Ã§adÄ±rÄ±mÄ± isteyin vereyim... Fakat vatanÄ±mdan hiÃ§ kimse bir karÄ±ÅŸ toprak istemesin!", author: "Mete Han" },
            { text: "Size Ã¶yle bir vatan bÄ±raktÄ±m ki, ebediyen sizin olacaktÄ±r.", author: "Sultan Alparslan" },
            { text: "Ä°mkanÄ±n sÄ±nÄ±rÄ±nÄ± gÃ¶rmek iÃ§in imkansÄ±zÄ± denemek lazÄ±m.", author: "Fatih Sultan Mehmet" },
            { text: "MuhtaÃ§ olduÄŸun kudret, damarlarÄ±ndaki asil kanda mevcuttur!", author: "Mustafa Kemal AtatÃ¼rk" },
            { text: "Halk iÃ§inde muteber bir nesne yok devlet gibi, olmaya devlet cihanda bir nefes sÄ±hhat gibi.", author: "Kanuni Sultan SÃ¼leyman" },
            { text: "Bir Ã§ivi bir nalÄ±, bir nal bir tÄ±rnaÄŸÄ±, bir tÄ±rnak bir ayaÄŸÄ±, bir ayak bir atÄ±, bir at bir kumandanÄ±, bir kumandan bir vatanÄ± mahvedebilir.", author: "Cengiz Han" },
            { text: "Ey TÃ¼rk GenÃ§liÄŸi! Birinci vazifen, TÃ¼rk istiklÃ¢lini, TÃ¼rk Cumhuriyetini, ilelebet, muhafaza ve mÃ¼dafaa etmektir.", author: "Mustafa Kemal AtatÃ¼rk" }
        ];

        // MÄ°TOLOJÄ° VERÄ°LERÄ°
        const mythGods = [
            { name: "GÃ¶k TanrÄ± (Tengri)", role: "BaÅŸ TanrÄ±", desc: "Her ÅŸeyin yaratÄ±cÄ±sÄ±, gÃ¶ÄŸÃ¼n hakimi. Tek ve mutlak gÃ¼Ã§tÃ¼r. Mavi gÃ¶k ile Ã¶zdeÅŸleÅŸir.", color: "from-sky-500 to-blue-700", icon: "sun" },
            { name: "Umay Ana", role: "DoÄŸum ve Bereket", desc: "Ã‡ocuklarÄ± ve hayvan yavrularÄ±nÄ± koruyan tanrÄ±Ã§a. Åefkatin sembolÃ¼dÃ¼r.", color: "from-rose-400 to-pink-600", icon: "heart" },
            { name: "Erlik Han", role: "YeraltÄ± TanrÄ±sÄ±", desc: "KÃ¶tÃ¼lÃ¼ÄŸÃ¼n, karanlÄ±ÄŸÄ±n ve yeraltÄ± dÃ¼nyasÄ±nÄ±n (Tamu) efendisi.", color: "from-slate-800 to-black", icon: "ghost" },
            { name: "Kayra Han", role: "Ä°yilik TanrÄ±sÄ±", desc: "GÃ¶ÄŸÃ¼n 17. katÄ±nda oturan, evrenin dÃ¼zenini saÄŸlayan ulu tanrÄ±.", color: "from-amber-300 to-yellow-500", icon: "star" },
            { name: "Ãœlgen", role: "Merhamet TanrÄ±sÄ±", desc: "Ä°yilik yapanlarÄ± korur, gÃ¶kyÃ¼zÃ¼ olaylarÄ±nÄ± yÃ¶netir.", color: "from-indigo-400 to-purple-600", icon: "cloud" }
        ];

        const mythCreatures = [
            { name: "Tulpar", desc: "KanatlÄ± efsanevi at. YiÄŸitleri her yere yetiÅŸtirir.", type: "Ä°yilik" },
            { name: "Asena (Bozkurt)", desc: "TÃ¼rklerin tÃ¼reyiÅŸ destanÄ±ndaki diÅŸi kurt ve rehber.", type: "Rehber" },
            { name: "TepegÃ¶z", desc: "Tek gÃ¶zlÃ¼ dev. Dede Korkut hikayelerinde geÃ§er.", type: "KÃ¶tÃ¼lÃ¼k" },
            { name: "Simurg (Anka)", desc: "Bilgi aÄŸacÄ±nda yaÅŸayan efsanevi kuÅŸ.", type: "Bilgelik" },
            { name: "Åahmeran", desc: "YÄ±lanlarÄ±n ÅŸahÄ±, hikmet sahibi varlÄ±k.", type: "Bilgelik" }
        ];

        const periods = [
            {
                id: 1, title: "Orta Asya ve Ä°slam Ã–ncesi", years: "M.Ã–. 220 - M.S. 940",
                shortDesc: "BozkÄ±r kÃ¼ltÃ¼rÃ¼, Åamanizm (GÃ¶k TanrÄ±), Hunlar ve GÃ¶ktÃ¼rkler.",
                details: {
                    military: "Mete Han tarafÄ±ndan kurulan 'Onlu Sistem' gÃ¼nÃ¼mÃ¼z kara kuvvetlerinin temelidir. 'Turan TaktiÄŸi' (Sahte Ricat/Hilal) ile sayÄ±ca Ã¼stÃ¼n ordular yenilmiÅŸtir.",
                    governance: "Devlet 'Ä°kili TeÅŸkilat' (DoÄŸu-BatÄ±) ile yÃ¶netilirdi. Kut Ä°nancÄ± hakimdi. Kararlar 'Toy'da (Kurultay) alÄ±nÄ±rdÄ±.",
                    culture: "Åamanizm (GÃ¶k TanrÄ±) inancÄ± doÄŸa ile iÃ§ iÃ§eydi. YuÄŸ tÃ¶renleri yapÄ±lÄ±rdÄ±. PazÄ±rÄ±k HalÄ±sÄ± bu dÃ¶nemin en Ã¶nemli sanat eseridir. GÃ¶Ã§ebe yaÅŸam tarzÄ± kilim motiflerine yansÄ±mÄ±ÅŸtÄ±r.",
                    importance: "Kavimler GÃ¶Ã§Ã¼'nÃ¼ baÅŸlatarak Avrupa'nÄ±n etnik yapÄ±sÄ±nÄ± deÄŸiÅŸtirdiler. HalÄ± dokumacÄ±lÄ±ÄŸÄ± ve demir iÅŸlemeciliÄŸinde zirveye Ã§Ä±ktÄ±lar."
                },
                gradient: "from-teal-600 to-teal-800"
            },
            {
                id: 2, title: "TÃ¼rk-Ä°slam ve SelÃ§uklular", years: "940 - 1299",
                shortDesc: "Ä°slamiyet'in kabulÃ¼, KarahanlÄ±lar, Gazneliler ve BÃ¼yÃ¼k SelÃ§uklu Devleti.",
                details: {
                    military: "Talas SavaÅŸÄ± (751) ile TÃ¼rk-Arap yakÄ±nlaÅŸmasÄ± baÅŸladÄ±. Gulam sistemi ve Ä°kta sistemi uygulandÄ±. 1071 Malazgirt Zaferi ile Anadolu'nun kapÄ±larÄ± TÃ¼rklere aÃ§Ä±ldÄ±.",
                    governance: "HÃ¼kÃ¼mdarlar 'Sultan' veya 'Han' unvanÄ± kullandÄ±. Åeri ve Ã–rfi hukuk bir arada uygulandÄ±.",
                    culture: "KarahanlÄ±lar dÃ¶neminde ilk TÃ¼rk-Ä°slam eserleri verildi (Kutadgu Bilig, Divan-Ä± LÃ¼gati't-TÃ¼rk). Nizamiye Medreseleri kuruldu.",
                    importance: "TÃ¼rk kÃ¼ltÃ¼rÃ¼ ile Ä°slam medeniyeti sentezlendi. HaÃ§lÄ± Seferlerine karÅŸÄ± Ä°slam dÃ¼nyasÄ± korundu."
                },
                gradient: "from-blue-600 to-blue-900"
            },
            {
                id: 3, title: "OsmanlÄ± Ä°mparatorluÄŸu", years: "1299 - 1922",
                shortDesc: "ÃœÃ§ kÄ±taya hÃ¼kmeden, 600 yÄ±llÄ±k cihan imparatorluÄŸu.",
                details: {
                    military: "YeniÃ§eri OcaÄŸÄ± ve TÄ±mar sistemi. Fatih dÃ¶neminde 'Åahi' toplarÄ± dÃ¶kÃ¼ldÃ¼.",
                    governance: "Mutlak monarÅŸi. Divan-Ä± HÃ¼mayun. 'Millet Sistemi' ile hoÅŸgÃ¶rÃ¼ politikasÄ±.",
                    culture: "Mimar Sinan eserleri (Selimiye, SÃ¼leymaniye). Divan edebiyatÄ±, Hat, Tezhip ve MinyatÃ¼r.",
                    importance: "Ä°stanbul'un fethi ile Orta Ã‡aÄŸ kapandÄ±. Halifelik TÃ¼rklere geÃ§ti."
                },
                gradient: "from-red-700 to-rose-900"
            },
            {
                id: 4, title: "TÃ¼rkiye Cumhuriyeti", years: "1923 - GÃ¼nÃ¼mÃ¼z",
                shortDesc: "KurtuluÅŸ SavaÅŸÄ± sonrasÄ± kurulan modern, laik ve sosyal hukuk devleti.",
                details: {
                    military: "DÃ¼zenli Ordu, NATO Ã¼yeliÄŸi, Modern Savunma Sanayii (Ä°HA/SÄ°HA).",
                    governance: "Egemenlik kayÄ±tsÄ±z ÅŸartsÄ±z milletindir. Cumhuriyet rejimi. Demokrasi.",
                    culture: "Harf Ä°nkÄ±labÄ±, Medeni Kanun, Tevhid-i Tedrisat.",
                    importance: "Emperyalizme karÅŸÄ± kazanÄ±lan KurtuluÅŸ SavaÅŸÄ±, sÃ¶mÃ¼rge altÄ±ndaki milletlere Ã¶rnek olmuÅŸtur."
                },
                gradient: "from-red-500 to-red-700"
            }
        ];

        const turkishStates = [
            { name: "BÃ¼yÃ¼k Hun Ä°mparatorluÄŸu", founder: "Teoman", capital: "Ã–tÃ¼ken", dates: "M.Ã–. 220 - M.S. 216", desc: "Tarihte bilinen ilk TÃ¼rk devleti.", color: "bg-amber-600", flagColor: "text-amber-600" },
            { name: "BatÄ± Hun Ä°mparatorluÄŸu", founder: "Panu", capital: "Ã–tÃ¼ken", dates: "M.S. 48 - 216", desc: "BÃ¼yÃ¼k Hun'un batÄ± kolu.", color: "bg-stone-600", flagColor: "text-stone-600" },
            { name: "Avrupa Hun Ä°mparatorluÄŸu", founder: "Balamir", capital: "BudapeÅŸte", dates: "375 - 469", desc: "Attila dÃ¶neminde en parlak devir.", color: "bg-red-800", flagColor: "text-red-800" },
            { name: "Ak Hun Ä°mparatorluÄŸu", founder: "Aksuvar", capital: "Belh", dates: "420 - 552", desc: "GÃ¼ney Asya'da hÃ¼kÃ¼m sÃ¼ren devlet.", color: "bg-gray-500", flagColor: "text-gray-500" },
            { name: "GÃ¶ktÃ¼rk Ä°mparatorluÄŸu", founder: "Bumin KaÄŸan", capital: "Ã–tÃ¼ken", dates: "552 - 744", desc: "TÃ¼rk adÄ±nÄ± kullanan ilk devlet.", color: "bg-cyan-600", flagColor: "text-cyan-600" },
            { name: "Uygur Devleti", founder: "Kutluk Bilge KÃ¼l", capital: "Karabalgasun", dates: "744 - 840", desc: "YerleÅŸik hayata geÃ§en ilk devlet.", color: "bg-yellow-600", flagColor: "text-yellow-600" },
            { name: "KarahanlÄ±lar", founder: "Bilge KÃ¼l Kadir", capital: "Balasagun", dates: "840 - 1212", desc: "Ä°lk MÃ¼slÃ¼man TÃ¼rk devleti.", color: "bg-emerald-700", flagColor: "text-emerald-700" },
            { name: "Gazneliler", founder: "Alp Tigin", capital: "Gazne", dates: "962 - 1187", desc: "Hindistan'a Ä°slamiyet'i yaydÄ±lar.", color: "bg-green-800", flagColor: "text-green-800" },
            { name: "BÃ¼yÃ¼k SelÃ§uklu", founder: "TuÄŸrul Bey", capital: "NiÅŸapur", dates: "1040 - 1157", desc: "Anadolu'nun kapÄ±larÄ±nÄ± aÃ§tÄ±lar.", color: "bg-teal-700", flagColor: "text-teal-700" },
            { name: "HarzemÅŸahlar", founder: "Ä°l Arslan", capital: "GÃ¼rgenÃ§", dates: "1097 - 1231", desc: "MoÄŸol istilasÄ±yla yÄ±kÄ±ldÄ±lar.", color: "bg-indigo-600", flagColor: "text-indigo-600" },
            { name: "AltÄ±nordu", founder: "Batu Han", capital: "Saray", dates: "1236 - 1502", desc: "Karadeniz kuzeyindeki TÃ¼rk-MoÄŸol devleti.", color: "bg-yellow-700", flagColor: "text-yellow-700" },
            { name: "Timur Ä°mparatorluÄŸu", founder: "Timur", capital: "Semerkant", dates: "1370 - 1507", desc: "Orta Asya'nÄ±n bilim merkezi.", color: "bg-blue-900", flagColor: "text-blue-900" },
            { name: "BabÃ¼r Ä°mparatorluÄŸu", founder: "BabÃ¼r Åah", capital: "Agra", dates: "1526 - 1858", desc: "Hindistan'daki son bÃ¼yÃ¼k TÃ¼rk devleti.", color: "bg-purple-700", flagColor: "text-purple-700" },
            { name: "OsmanlÄ± Ä°mparatorluÄŸu", founder: "Osman Bey", capital: "Ä°stanbul", dates: "1299 - 1922", desc: "600 yÄ±llÄ±k cihan devleti.", color: "bg-red-700", flagColor: "text-red-700" },
        ];

        const leaders = [
            { name: "Mete Han", title: "Asya Hun", dates: "M.Ã–. 209-174", desc: "Onlu sistemin kurucusu.", imgSymbol: "ğŸº", gradient: "from-orange-400 to-amber-600", category: "ruler" },
            { name: "Attila", title: "Avrupa Hun", dates: "406-453", desc: "TanrÄ±'nÄ±n KÄ±rbacÄ±.", imgSymbol: "âš”ï¸", gradient: "from-red-800 to-black", category: "ruler" },
            { name: "Bumin KaÄŸan", title: "GÃ¶ktÃ¼rk HakanÄ±", dates: "? - 552", desc: "I. GÃ¶ktÃ¼rk Devleti'nin kurucusudur. TÃ¼rk adÄ±yla kurulan ilk devletin baÅŸÄ±dÄ±r.", imgSymbol: "ğŸ”ï¸", gradient: "from-cyan-600 to-blue-800", category: "ruler" },
            { name: "Bilge KaÄŸan", title: "GÃ¶ktÃ¼rk", dates: "683-734", desc: "Orhun Abideleri yazarÄ±.", imgSymbol: "ğŸ“œ", gradient: "from-cyan-500 to-blue-600", category: "ruler" },
            { name: "KÃ¼rÅŸad", title: "GÃ¶ktÃ¼rk Prensi", dates: "? - 639", desc: "40 Ã§erisiyle Ã‡in sarayÄ±nÄ± basarak baÄŸÄ±msÄ±zlÄ±k ateÅŸini yakan kahraman.", imgSymbol: "ğŸ”¥", gradient: "from-red-600 to-orange-700", category: "hero" },
            { name: "Ä°lteriÅŸ KaÄŸan", title: "II. GÃ¶ktÃ¼rk", dates: "? - 691", desc: "DaÄŸÄ±lan TÃ¼rkleri toplayÄ±p devleti yeniden kuran (Ä°li Derleyen) ulu kaÄŸan.", imgSymbol: "ğŸº", gradient: "from-cyan-600 to-blue-800", category: "ruler" },
            { name: "Satuk BuÄŸra Han", title: "KarahanlÄ± HÃ¼kÃ¼mdarÄ±", dates: "901 - 955", desc: "Ä°slamiyet'i kabul eden ilk TÃ¼rk hÃ¼kÃ¼mdarlarÄ±ndandÄ±r. MÃ¼slÃ¼man olduktan sonra 'AbdÃ¼lkerim' adÄ±nÄ± almÄ±ÅŸtÄ±r.", imgSymbol: "ğŸ•Œ", gradient: "from-emerald-600 to-teal-800", category: "ruler" },
            { name: "Sultan Alparslan", title: "B. SelÃ§uklu", dates: "1029-1072", desc: "Malazgirt Fatihi.", imgSymbol: "ğŸ¦", gradient: "from-teal-400 to-teal-600", category: "ruler" },
            { name: "Fatih Sultan Mehmet", title: "OsmanlÄ±", dates: "1432-1481", desc: "Ä°stanbul Fatihi.", imgSymbol: "ğŸ°", gradient: "from-red-500 to-rose-700", category: "ruler" },
            { name: "Kanuni Sultan SÃ¼leyman", title: "OsmanlÄ±", dates: "1494-1566", desc: "MuhteÅŸem SÃ¼leyman.", imgSymbol: "ğŸ‘‘", gradient: "from-purple-500 to-indigo-700", category: "ruler" },
            { name: "M. Kemal AtatÃ¼rk", title: "TÃ¼rkiye Cum.", dates: "1881-193âˆ", desc: "Cumhuriyetimizin Kurucusu.", imgSymbol: "ğŸ‡¹ğŸ‡·", gradient: "from-red-600 to-red-800", category: "ruler" },
            { name: "Vezir Tonyukuk", title: "GÃ¶ktÃ¼rk", dates: "646-726", desc: "TÃ¼rklerin ilk veziri ve bilgesi.", imgSymbol: "ğŸ—¿", gradient: "from-stone-400 to-stone-600", category: "scholar" },
            { name: "KaÅŸgarlÄ± Mahmut", title: "Dil Bilimci", dates: "11. YY", desc: "Divan-Ä± LÃ¼gati't-TÃ¼rk yazarÄ±.", imgSymbol: "ğŸ“–", gradient: "from-amber-500 to-orange-600", category: "scholar" },
            { name: "Mimar Sinan", title: "BaÅŸ Mimar", dates: "1489-1588", desc: "OsmanlÄ±'nÄ±n baÅŸ mimarÄ±.", imgSymbol: "ğŸ›ï¸", gradient: "from-stone-300 to-stone-500", category: "scholar" },
            { name: "Ä°bn-i Sina", title: "TÄ±p Alimi", dates: "980-1037", desc: "TÄ±bbÄ±n babasÄ± (Avicenna).", imgSymbol: "ğŸ©º", gradient: "from-emerald-400 to-green-600", category: "scholar" },
            { name: "KÃ¼ltigin", title: "GÃ¶ktÃ¼rk KomutanÄ±", dates: "684-731", desc: "Efsanevi GÃ¶ktÃ¼rk komutanÄ±.", imgSymbol: "âš”ï¸", gradient: "from-gray-600 to-gray-800", category: "hero" },
            { name: "Seyit OnbaÅŸÄ±", title: "Ã‡anakkale", dates: "1889-1939", desc: "Ã‡anakkale kahramanÄ±.", imgSymbol: "ğŸ’ª", gradient: "from-stone-500 to-amber-700", category: "hero" },
            { name: "Nene Hatun", title: "Milli MÃ¼cadele", dates: "1857-1955", desc: "Erzurum savunmasÄ±nÄ±n simgesi.", imgSymbol: "ğŸ§£", gradient: "from-red-400 to-red-600", category: "hero" }
        ];

        const epics = [
            { 
                name: "OÄŸuz KaÄŸan", 
                desc: "TÃ¼rklerin atasÄ± OÄŸuz Han'Ä±n doÄŸumu ve yaÅŸamÄ±.", 
                details: "OÄŸuz KaÄŸan DestanÄ±, TÃ¼rklerin atasÄ± kabul edilen OÄŸuz Han'Ä±n doÄŸumunu, bÃ¼yÃ¼mesini, Ã¼stÃ¼n yeteneklerini ve yaptÄ±ÄŸÄ± fetihleri anlatÄ±r. Destana gÃ¶re OÄŸuz KaÄŸan doÄŸar doÄŸmaz konuÅŸmuÅŸ, annesinden bir kez sÃ¼t emip bir daha emmemiÅŸtir. KÄ±sa sÃ¼rede bÃ¼yÃ¼yÃ¼p bir kahraman olmuÅŸtur. Ormandaki canavarÄ± Ã¶ldÃ¼rmÃ¼ÅŸ, gÃ¶kten inen bir Ä±ÅŸÄ±ÄŸÄ±n iÃ§indeki kÄ±zla ve aÄŸaÃ§ kovuÄŸundaki bir kÄ±zla evlenmiÅŸtir. Bu evliliklerden 6 oÄŸlu olmuÅŸtur: GÃ¼n, Ay, YÄ±ldÄ±z (Bozoklar) ve GÃ¶k, DaÄŸ, Deniz (ÃœÃ§oklar). Ãœlkeyi oÄŸullarÄ± arasÄ±nda paylaÅŸtÄ±rmÄ±ÅŸtÄ±r.",
                color: "border-amber-200 bg-amber-50 text-amber-900" 
            },
            { 
                name: "KÃ¼rÅŸad Ä°htilali", 
                desc: "40 YiÄŸidin Ã‡in sarayÄ±na baskÄ±nÄ±.", 
                details: "Ã‡in esareti altÄ±ndaki TÃ¼rkleri kurtarmak isteyen KÃ¼rÅŸad ve 40 arkadaÅŸÄ±, yaÄŸmurlu bir gecede Ã‡in Ä°mparatorunu kaÃ§Ä±rma planÄ± yapar. Ä°mparator saraydan Ã§Ä±kmayÄ±nca, onlar saraya dalar. YÃ¼zlerce muhafÄ±zla Ã§arpÄ±ÅŸan 40 yiÄŸit, sarayÄ± terk etmek zorunda kalÄ±r ve Vey Nehri kÄ±yÄ±sÄ±na Ã§ekilirler. Ancak kÃ¶prÃ¼ yÄ±kÄ±lmÄ±ÅŸtÄ±r. Burada son oklarÄ±na kadar savaÅŸarak ÅŸehit dÃ¼ÅŸerler. Bu fedakarlÄ±k, TÃ¼rk milletinin istiklal ateÅŸini yakar ve daha sonra kurulacak II. GÃ¶ktÃ¼rk Devleti'nin temelini atar.",
                color: "border-red-200 bg-red-50 text-red-900" 
            },
            { 
                name: "Ergenekon", 
                desc: "Demir daÄŸÄ±n eritilip yeniden doÄŸuÅŸ.", 
                details: "Ergenekon DestanÄ±, GÃ¶ktÃ¼rklerin yeniden doÄŸuÅŸunu anlatÄ±r. DÃ¼ÅŸmanlarÄ± tarafÄ±ndan hileyle yenilen TÃ¼rklerden sadece iki aile (KÄ±yan ve NÃ¼kÃ¼z) saÄŸ kalÄ±r. Sarp daÄŸlarÄ±n arasÄ±nda, Ergenekon denilen verimli bir vadiye sÄ±ÄŸÄ±nÄ±rlar. Burada 400 yÄ±l kalÄ±p Ã§oÄŸalÄ±rlar. Vadiye sÄ±ÄŸmaz olunca, atalarÄ±nÄ±n demir madeni iÅŸlettiÄŸi daÄŸÄ± eriterek dÄ±ÅŸarÄ± Ã§Ä±karlar. Onlara BÃ¶rteÃ§ine adÄ±nda bir Bozkurt yol gÃ¶sterir. Bu Ã§Ä±kÄ±ÅŸ gÃ¼nÃ¼, Nevruz (Yeni GÃ¼n) olarak kutlanÄ±r.",
                color: "border-slate-200 bg-slate-50 text-slate-900" 
            },
            { 
                name: "TÃ¼reyiÅŸ", 
                desc: "UygurlarÄ±n kÃ¶keni efsanesi.", 
                details: "TÃ¼reyiÅŸ DestanÄ±, Uygur TÃ¼rklerinin kÃ¶kenini anlatÄ±r. HakanÄ±n dÃ¼nyalar gÃ¼zeli iki kÄ±zÄ± vardÄ±r ve Hakan onlarÄ± ancak bir TanrÄ± ile evlendirebileceÄŸini dÃ¼ÅŸÃ¼nÃ¼r. KÄ±zlarÄ±nÄ± bir kuleye kapatÄ±r. GÃ¶k TanrÄ±, bir Bozkurt kÄ±lÄ±ÄŸÄ±nda kuleye gelir ve kÄ±zlarla evlenir. Bu evlilikten doÄŸan Ã§ocuklar Uygur halkÄ±nÄ±n atasÄ± olur. Dokuz OÄŸuz - On Uygur boylarÄ±nÄ±n bu ÅŸekilde tÃ¼rediÄŸine inanÄ±lÄ±r.",
                color: "border-blue-200 bg-blue-50 text-blue-900" 
            },
            { 
                name: "Manas", 
                desc: "DÃ¼nyanÄ±n en uzun destanÄ±.", 
                details: "KÄ±rgÄ±z TÃ¼rklerine ait olan Manas DestanÄ±, 500.000 beyiti aÅŸan uzunluÄŸuyla dÃ¼nyanÄ±n en uzun destanÄ±dÄ±r ve hala yaÅŸayan (anlatÄ±lan) bir destandÄ±r. Kahraman Manas'Ä±n KÄ±rgÄ±zlarÄ± birleÅŸtirmesi, dÃ¼ÅŸmanlarla savaÅŸlarÄ±, Ã‡in'e karÅŸÄ± mÃ¼cadeleleri ve oÄŸlu Semetey ile torunu Seytek'in hikayeleri anlatÄ±lÄ±r. KÄ±rgÄ±zlarÄ±n ansiklopedisi niteliÄŸindedir; Ã¶rf, adet ve inanÃ§larÄ±nÄ± barÄ±ndÄ±rÄ±r.",
                color: "border-emerald-200 bg-emerald-50 text-emerald-900" 
            },
            { 
                name: "Dede Korkut", 
                desc: "OÄŸuzlarÄ±n hikayeleri.", 
                details: "Dede Korkut Hikayeleri (Kitab-Ä± Dede Korkut), OÄŸuz TÃ¼rklerinin Anadolu ve Azerbaycan coÄŸrafyasÄ±ndaki yaÅŸantÄ±larÄ±nÄ±, inanÃ§larÄ±nÄ±, kahramanlÄ±klarÄ±nÄ± anlatan 12 hikaye ve bir Ã¶nsÃ¶zden oluÅŸur. Dede Korkut, bu hikayelerin anlatÄ±cÄ±sÄ± olan bilge bir ozandÄ±r. Hikayelerde Deli Dumrul, BoÄŸaÃ§ Han, BamsÄ± Beyrek gibi unutulmaz karakterler ve TepegÃ¶z gibi olaÄŸanÃ¼stÃ¼ varlÄ±klar yer alÄ±r. TÃ¼rkÃ§enin en gÃ¼zel Ã¶rneklerindendir.",
                color: "border-orange-200 bg-orange-50 text-orange-900" 
            }
        ];

        const quizQuestions = [
            { q: "Ä°lk TÃ¼rk devleti hangisidir?", opts: ["GÃ¶ktÃ¼rk", "Asya Hun", "Uygur", "Avar"], a: 1 },
            { q: "Anadolu'nun kapÄ±larÄ± hangi savaÅŸla aÃ§Ä±ldÄ±?", opts: ["Miryokefalon", "Dandanakan", "Malazgirt", "Pasinler"], a: 2 },
            { q: "Ä°stanbul kaÃ§ yÄ±lÄ±nda fethedildi?", opts: ["1453", "1299", "1071", "1923"], a: 0 },
            { q: "TC Kurucusu kimdir?", opts: ["Ä°smet Ä°nÃ¶nÃ¼", "KazÄ±m Karabekir", "M. Kemal AtatÃ¼rk", "Fevzi Ã‡akmak"], a: 2 },
            { q: "Ä°lk yerleÅŸik hayata geÃ§en TÃ¼rk devleti?", opts: ["Hunlar", "GÃ¶ktÃ¼rkler", "Uygurlar", "SelÃ§uklular"], a: 2 }
        ];

        // --- MÃœZÄ°K LÄ°STESÄ° ---
        const musicPlaylist = [
            { title: "Dombra", src: "https://upload.wikimedia.org/wikipedia/commons/transcoded/e/e2/DombÄ±ra_-_Arslanbek_Sultanbekov.ogg/DombÄ±ra_-_Arslanbek_Sultanbekov.ogg.mp3" }, // Wikimedia (Ã–rnek)
            { title: "Ceddin Deden", src: "https://archive.org/download/OttomanMilitaryMarch/CeddinDeden.mp3" }, // Archive.org (Ã–rnek)
            { title: "HÃ¼cum MarÅŸÄ±", src: "https://archive.org/download/OttomanMilitaryMarch/HucumMarsi.mp3" }, // Archive.org (Ã–rnek)
            { title: "DiriliÅŸ MÃ¼ziÄŸi (Cover)", src: "https://upload.wikimedia.org/wikipedia/commons/8/82/Turkish_Anthem.ogg" } // Placeholder/Generic
        ];

        // --- SVG HELPER FUNCTIONS ---
        function getMotifGeyik() {
            return `<svg viewBox="0 0 100 100" class="w-full h-full"><path d="M30 70 L50 70 L50 40 L30 40 Z" fill="currentColor"/><path d="M50 40 L70 20 M50 40 L30 20" stroke="currentColor" stroke-width="6"/><path d="M70 20 L80 30 M70 20 L80 10 M30 20 L20 30 M30 20 L20 10" stroke="currentColor" stroke-width="4"/><circle cx="40" cy="50" r="3" fill="white"/></svg>`;
        }
        function getMotifEliBelinde() {
            return `<svg viewBox="0 0 100 100" class="w-full h-full"><path d="M50 20 L70 40 L50 60 L30 40 Z" fill="currentColor" opacity="0.8"/><path d="M30 40 L10 20 M70 40 L90 20 M50 60 L50 90" stroke="currentColor" stroke-width="8" stroke-linecap="round"/><circle cx="50" cy="30" r="5" fill="white"/></svg>`;
        }
        function getMotifKocBoynuzu() {
            return `<svg viewBox="0 0 100 100" class="w-full h-full"><path d="M20 40 C20 10, 50 10, 50 40 C50 70, 80 70, 80 40" stroke="currentColor" stroke-width="12" fill="none" stroke-linecap="round"/><path d="M20 60 C20 90, 50 90, 50 60 C50 30, 80 30, 80 60" stroke="currentColor" stroke-width="12" fill="none" stroke-linecap="round" opacity="0.6"/></svg>`;
        }
        function getMotifHayatAgaci() {
            return `<svg viewBox="0 0 100 100" class="w-full h-full"><path d="M50 90 L50 10" stroke="currentColor" stroke-width="6" stroke-linecap="round"/><path d="M50 70 L80 50 M50 50 L80 30 M50 70 L20 50 M50 50 L20 30" stroke="currentColor" stroke-width="6" stroke-linecap="round"/><circle cx="50" cy="10" r="6" fill="currentColor"/><circle cx="80" cy="50" r="4" fill="currentColor" opacity="0.6"/><circle cx="20" cy="50" r="4" fill="currentColor" opacity="0.6"/></svg>`;
        }

        // --- STATE VE LOGIC ---
        let activeTab = 'home';
        let leaderCategory = 'all';
        let searchTerm = '';
        let dailyQuote = {};
        let quizState = { current: 0, score: 0, finished: false, selected: null };
        let currentSongIndex = 0;
        let isPlaying = false;

        // --- BAÅLANGIÃ‡ ---
        document.addEventListener('DOMContentLoaded', () => {
            dailyQuote = historicQuotes[Math.floor(Math.random() * historicQuotes.length)];
            renderApp();
            initMusicPlayer();
        });

        // --- RENDER FONKSÄ°YONLARI ---
        function renderTab(tabName) {
            activeTab = tabName;
            searchTerm = ''; // Tab deÄŸiÅŸince aramayÄ± sÄ±fÄ±rla
            
            // Buton Aktiflik DurumlarÄ±
            document.querySelectorAll('.nav-btn-desktop').forEach(btn => {
                if(btn.dataset.tab === tabName) {
                    btn.classList.add('bg-gray-900', 'text-white', 'shadow-lg');
                    btn.classList.remove('text-gray-500', 'hover:bg-gray-100');
                } else {
                    btn.classList.remove('bg-gray-900', 'text-white', 'shadow-lg');
                    btn.classList.add('text-gray-500', 'hover:bg-gray-100');
                }
            });

            document.querySelectorAll('.nav-btn-mobile').forEach(btn => {
                if(btn.dataset.tab === tabName) {
                    btn.classList.add('text-amber-400', 'scale-110');
                    btn.classList.remove('text-white');
                } else {
                    btn.classList.remove('text-amber-400', 'scale-110');
                    btn.classList.add('text-white');
                }
            });

            renderApp();
        }

        function renderApp() {
            const main = document.getElementById('main-content');
            main.innerHTML = ''; // Temizle

            if (activeTab === 'home') renderHome(main);
            else if (activeTab === 'states') renderStates(main);
            else if (activeTab === 'leaders') renderLeaders(main);
            else if (activeTab === 'mythology') renderMythology(main);
            else if (activeTab === 'art') renderArt(main);
            else if (activeTab === 'quiz') renderQuiz(main);

            lucide.createIcons();
        }

        // --- MÃœZÄ°K Ã‡ALAR LOGIC ---
        function initMusicPlayer() {
            const playlistContainer = document.getElementById('playlist-container');
            const audio = document.getElementById('bg-audio');
            
            // Playlist oluÅŸtur
            playlistContainer.innerHTML = musicPlaylist.map((song, idx) => `
                <div onclick="playSong(${idx})" class="p-2 rounded-lg hover:bg-white/10 cursor-pointer flex items-center gap-2 text-xs ${idx === currentSongIndex ? 'text-amber-400 bg-white/5' : 'text-gray-300'}">
                    <i data-lucide="music" class="w-3 h-3"></i> ${song.title}
                </div>
            `).join('');
            
            audio.src = musicPlaylist[currentSongIndex].src;
            audio.onended = nextSong; // ÅarkÄ± bitince sonrakine geÃ§
            
            lucide.createIcons();
        }

        function toggleMusicPanel() {
            const panel = document.getElementById('music-panel');
            if(panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                setTimeout(() => {
                    panel.classList.remove('opacity-0', 'scale-95');
                }, 10);
            } else {
                panel.classList.add('opacity-0', 'scale-95');
                setTimeout(() => {
                    panel.classList.add('hidden');
                }, 300);
            }
        }

        function togglePlay() {
            const audio = document.getElementById('bg-audio');
            const icon = document.getElementById('play-icon');
            const eq = document.getElementById('equalizer');
            const fab = document.getElementById('music-fab');
            const coverIcon = document.querySelector('#music-cover i');

            if (audio.paused) {
                audio.play();
                icon.setAttribute('data-lucide', 'pause');
                // Icon gÃ¼ncellemesi iÃ§in re-render gerekebilir ama manuel attribute deÄŸiÅŸimi hÄ±zlÄ±dÄ±r
                // Lucide yeniden tarama yerine innerHTML deÄŸiÅŸimi daha iyi olabilir
                document.querySelector('#play-icon').innerHTML = '<path d="M6 4h4v16H6zM14 4h4v16h-4z"></path>'; // Pause SVG path manuel
                
                eq.classList.remove('hidden');
                eq.classList.add('flex');
                fab.classList.add('music-playing');
                coverIcon.classList.add('animate-spin');
                isPlaying = true;
            } else {
                audio.pause();
                document.querySelector('#play-icon').innerHTML = '<polygon points="5 3 19 12 5 21 5 3"></polygon>'; // Play SVG path
                
                eq.classList.add('hidden');
                eq.classList.remove('flex');
                fab.classList.remove('music-playing');
                coverIcon.classList.remove('animate-spin');
                isPlaying = false;
            }
            
            // ÅarkÄ± ismini gÃ¼ncelle (ilk aÃ§Ä±lÄ±ÅŸta boÅŸsa)
            document.getElementById('current-song-title').innerText = musicPlaylist[currentSongIndex].title;
        }

        function playSong(idx) {
            currentSongIndex = idx;
            const audio = document.getElementById('bg-audio');
            audio.src = musicPlaylist[currentSongIndex].src;
            
            // Playlist UI gÃ¼ncelle
            initMusicPlayer();
            
            // Direkt Ã§al
            const audioEl = document.getElementById('bg-audio');
            if(audioEl.paused) togglePlay(); // EÄŸer duruyorsa baÅŸlat, zaten Ã§alÄ±yorsa devam et (src deÄŸiÅŸtiÄŸi iÃ§in otomatik baÅŸlar genelde ama togglePlay UI gÃ¼nceller)
            else audioEl.play(); // Zaten Ã§alÄ±yorsa sadece yeni kaynaÄŸÄ± oynat
            
            // Toggle play fonksiyonu UI senkronizasyonu iÃ§in Ã¶nemli, manuel set edelim
            const icon = document.getElementById('play-icon');
            const eq = document.getElementById('equalizer');
            const fab = document.getElementById('music-fab');
            
            document.querySelector('#play-icon').innerHTML = '<path d="M6 4h4v16H6zM14 4h4v16h-4z"></path>';
            eq.classList.remove('hidden');
            eq.classList.add('flex');
            fab.classList.add('music-playing');
            
            document.getElementById('current-song-title').innerText = musicPlaylist[currentSongIndex].title;
        }

        function nextSong() {
            let nextIdx = currentSongIndex + 1;
            if (nextIdx >= musicPlaylist.length) nextIdx = 0;
            playSong(nextIdx);
        }

        function prevSong() {
            let prevIdx = currentSongIndex - 1;
            if (prevIdx < 0) prevIdx = musicPlaylist.length - 1;
            playSong(prevIdx);
        }

        // --- SEARCH & FILTER HANDLERS ---
        function handleSearch(value, type) {
            searchTerm = value;
            if (type === 'states') {
                updateStatesGrid();
            } else if (type === 'leaders') {
                updateLeadersGrid();
            }
        }

        function setCategory(cat) {
            leaderCategory = cat;
            updateLeadersGrid();
            // Buton stillerini gÃ¼ncelle
            document.querySelectorAll('.cat-btn').forEach(btn => {
                if(btn.dataset.cat === cat) {
                    btn.classList.add('bg-gray-800', 'text-white', 'shadow-lg');
                    btn.classList.remove('bg-white', 'text-gray-600');
                } else {
                    btn.classList.remove('bg-gray-800', 'text-white', 'shadow-lg');
                    btn.classList.add('bg-white', 'text-gray-600');
                }
            });
        }

        // --- SAYFA RENDERLARI (HTML Stringler) ---
        
        // ... (DiÄŸer render fonksiyonlarÄ± yukarÄ±daki orijinal kod ile aynÄ± kalacak: renderHome, renderStates, renderLeaders, renderMythology, renderArt, renderQuiz) ...
        // Kod tekrarÄ± olmamasÄ± iÃ§in burayÄ± kÄ±sa tutuyorum, yukarÄ±daki tam fonksiyonlarÄ± kullanÄ±n.
        // Ancak tek dosya bÃ¼tÃ¼nlÃ¼ÄŸÃ¼ iÃ§in aÅŸaÄŸÄ±ya kopyalÄ±yorum.

        function renderHome(container) {
            let html = `
                <div class="space-y-8 animate-fade-in">
                    <!-- GÃ¼nlÃ¼k SÃ¶z -->
                    <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-4 border-l-4 border-amber-500 shadow-sm flex gap-3">
                        <div class="bg-amber-100 text-amber-700 p-2 rounded-lg h-fit"><i data-lucide="feather" class="w-5 h-5"></i></div>
                        <div>
                            <p class="text-gray-800 font-serif italic text-sm leading-relaxed mb-2">"${dailyQuote.text}"</p>
                            <span class="text-xs font-bold text-amber-700 uppercase tracking-wider">- ${dailyQuote.author}</span>
                        </div>
                    </div>

                    <!-- Hero -->
                    <div class="relative overflow-hidden rounded-3xl bg-gradient-to-br from-red-900 via-rose-800 to-red-950 text-white shadow-2xl group p-8">
                        <div class="absolute top-0 right-0 p-6 opacity-20 transform group-hover:scale-110 transition-transform duration-700">
                            <div class="flex gap-2 items-center justify-center font-serif font-bold text-amber-200 text-9xl select-none opacity-50">IYI</div>
                        </div>
                        <div class="relative z-10">
                            <div class="flex items-center gap-2 mb-3 text-amber-400">
                                <i data-lucide="sparkles" class="w-4 h-4"></i>
                                <span class="text-xs font-bold tracking-[0.2em] uppercase">Tarihini TanÄ±</span>
                            </div>
                            <h1 class="text-4xl font-bold mb-4 leading-tight">TÃ¼rk Tarihi <br/><span class="text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-amber-500">Rehberi</span></h1>
                            <p class="text-red-100 opacity-90 text-sm">Orta Asya'dan gÃ¼nÃ¼mÃ¼ze uzanan eÅŸsiz bir yolculuk.</p>
                        </div>
                    </div>

                    <!-- DÃ¶nemler -->
                    <div>
                        <h2 class="text-xl font-bold text-gray-800 mb-5 flex items-center gap-2"><div class="p-1.5 bg-red-100 rounded-md text-red-700"><i data-lucide="map" class="w-5 h-5"></i></div> Tarihi DÃ¶nemler</h2>
                        <div class="grid grid-cols-1 gap-5">
                            ${periods.map((p, idx) => `
                                <div onclick="openPeriodModal(${idx})" class="group relative bg-white rounded-2xl p-1 shadow-md hover:shadow-xl transition-all cursor-pointer border border-slate-100">
                                    <div class="absolute inset-0 bg-gradient-to-br ${p.gradient} opacity-[0.03] rounded-2xl"></div>
                                    <div class="flex h-full">
                                        <div class="w-3 rounded-l-xl bg-gradient-to-b ${p.gradient}"></div>
                                        <div class="flex-1 p-5 flex justify-between items-center">
                                            <div>
                                                <div class="flex items-center gap-3 mb-2">
                                                    <span class="text-[10px] font-extrabold tracking-wider uppercase text-white px-3 py-1 rounded-full bg-gradient-to-r ${p.gradient} shadow-sm">${p.years}</span>
                                                </div>
                                                <h3 class="font-bold text-gray-800 text-lg mb-1 group-hover:text-red-700 transition-colors">${p.title}</h3>
                                                <p class="text-xs text-gray-500 line-clamp-2">${p.shortDesc}</p>
                                            </div>
                                            <div class="pl-4"><i data-lucide="chevron-right" class="text-gray-300 group-hover:text-red-600"></i></div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Destanlar -->
                    <div>
                        <h2 class="text-xl font-bold text-gray-800 mb-5 flex items-center gap-2"><div class="p-1.5 bg-teal-100 rounded-md text-teal-700"><i data-lucide="scroll" class="w-5 h-5"></i></div> Destanlar</h2>
                        <div class="flex gap-4 overflow-x-auto pb-4 scrollbar-hide">
                            ${epics.map((epic, idx) => `
                                <div onclick="openEpicModal(${idx})" class="min-w-[240px] p-5 rounded-2xl border ${epic.color} bg-white shadow-sm cursor-pointer hover:shadow-md transition-all group">
                                    <div class="flex justify-between items-start">
                                        <h4 class="font-bold text-base group-hover:opacity-80 transition-opacity">${epic.name} DestanÄ±</h4>
                                        <i data-lucide="book-open" class="w-4 h-4 opacity-50 group-hover:opacity-100 transition-opacity"></i>
                                    </div>
                                    <p class="text-xs opacity-80 mt-2">${epic.desc}</p>
                                    <div class="mt-3 text-[10px] font-bold opacity-60 flex items-center gap-1">
                                        OKUMAK Ä°Ã‡Ä°N TIKLA <i data-lucide="arrow-right" class="w-3 h-3"></i>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function renderStates(container) {
            let html = `
                <div class="space-y-6 animate-slide-up">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="bg-indigo-100 text-indigo-700 p-2 rounded-lg"><i data-lucide="landmark" class="w-6 h-6"></i></span>
                        <h2 class="text-2xl font-bold text-gray-800">TÃ¼rk Devletleri</h2>
                    </div>
                    
                    <div class="relative mb-6">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i data-lucide="search" class="h-5 w-5 text-gray-400"></i>
                        </div>
                        <input type="text" value="${searchTerm}" oninput="handleSearch(this.value, 'states')" class="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 sm:text-sm shadow-sm transition-all" placeholder="Devlet, kurucu veya baÅŸkent ara...">
                    </div>

                    <div id="states-grid" class="grid grid-cols-1 gap-4"></div>
                    
                    <div id="tr-card" class="bg-gradient-to-br from-red-600 to-red-800 rounded-2xl p-6 text-white shadow-xl mt-6 relative overflow-hidden">
                        <div class="absolute -right-6 -top-6 opacity-20 rotate-12"><i data-lucide="star" class="w-32 h-32"></i></div>
                        <div class="relative z-10">
                            <h3 class="text-2xl font-bold mb-2 flex items-center gap-2"><i data-lucide="star" class="w-6 h-6"></i> TÃ¼rkiye Cumhuriyeti</h3>
                            <p class="text-red-100 text-sm mb-4">1923'ten sonsuza dek...</p>
                            <div class="flex gap-8 text-sm">
                                <div><span class="block opacity-70 text-xs">Kurucu</span><span class="font-bold text-lg">M. Kemal AtatÃ¼rk</span></div>
                                <div><span class="block opacity-70 text-xs">BaÅŸkent</span><span class="font-bold text-lg">Ankara</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
            updateStatesGrid(); 
        }

        function updateStatesGrid() {
            const grid = document.getElementById('states-grid');
            const trCard = document.getElementById('tr-card');
            if(!grid) return;

            const term = searchTerm.toLowerCase();
            const filtered = turkishStates.filter(s => 
                s.name.toLowerCase().includes(term) || 
                s.founder.toLowerCase().includes(term) ||
                s.capital.toLowerCase().includes(term)
            );

            if(trCard) {
                if (term === '' || 'tÃ¼rkiye cumhuriyeti'.includes(term)) {
                    trCard.style.display = 'block';
                } else {
                    trCard.style.display = 'none';
                }
            }

            if (filtered.length === 0) {
                grid.innerHTML = `<div class="text-center p-8 text-gray-500 w-full bg-white/50 rounded-2xl border border-gray-100">SonuÃ§ bulunamadÄ±.</div>`;
                return;
            }

            grid.innerHTML = filtered.map(state => `
                <div class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-100 hover:shadow-xl transition-all group">
                    <div class="h-3 w-full ${state.color}"></div>
                    <div class="p-5">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="font-bold text-lg ${state.flagColor} flex items-center gap-2"><i data-lucide="flag" class="w-4 h-4"></i> ${state.name}</h3>
                                <span class="text-xs font-bold bg-gray-100 text-gray-600 px-2 py-1 rounded mt-1 inline-block">${state.dates}</span>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mb-3 text-sm">
                            <div><span class="text-gray-400 text-xs block">Kurucu</span><span class="font-semibold">${state.founder}</span></div>
                            <div><span class="text-gray-400 text-xs block">BaÅŸkent</span><span class="font-semibold">${state.capital}</span></div>
                        </div>
                        <p class="text-sm text-gray-600 border-t border-gray-100 pt-3 mt-2">${state.desc}</p>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderLeaders(container) {
            let html = `
                <div class="space-y-6 animate-slide-up">
                    <div class="flex flex-col gap-4">
                        <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
                            <span class="bg-amber-100 text-amber-700 p-2 rounded-lg"><i data-lucide="crown" class="w-6 h-6"></i></span>
                            Ã–nemli Åahsiyetler
                        </h2>
                        
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i data-lucide="search" class="h-5 w-5 text-gray-400"></i>
                            </div>
                            <input type="text" value="${searchTerm}" oninput="handleSearch(this.value, 'leaders')" class="block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 sm:text-sm shadow-sm transition-all" placeholder="Lider ismi ara...">
                        </div>

                        <div class="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                            <button onclick="setCategory('all')" class="cat-btn px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${leaderCategory === 'all' ? 'bg-gray-800 text-white shadow-lg' : 'bg-white text-gray-600 border border-gray-200'}" data-cat="all">TÃ¼mÃ¼</button>
                            <button onclick="setCategory('ruler')" class="cat-btn px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${leaderCategory === 'ruler' ? 'bg-gray-800 text-white shadow-lg' : 'bg-white text-gray-600 border border-gray-200'}" data-cat="ruler">HÃ¼kÃ¼mdarlar</button>
                            <button onclick="setCategory('scholar')" class="cat-btn px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${leaderCategory === 'scholar' ? 'bg-gray-800 text-white shadow-lg' : 'bg-white text-gray-600 border border-gray-200'}" data-cat="scholar">Bilge & Alim</button>
                            <button onclick="setCategory('hero')" class="cat-btn px-4 py-2 rounded-full text-xs font-bold whitespace-nowrap transition-all ${leaderCategory === 'hero' ? 'bg-gray-800 text-white shadow-lg' : 'bg-white text-gray-600 border border-gray-200'}" data-cat="hero">Kahramanlar</button>
                        </div>
                    </div>
                    <div id="leaders-grid" class="grid grid-cols-1 sm:grid-cols-2 gap-5"></div>
                </div>
            `;
            container.innerHTML = html;
            updateLeadersGrid();
        }

        function updateLeadersGrid() {
            const grid = document.getElementById('leaders-grid');
            if(!grid) return;

            const term = searchTerm.toLowerCase();
            const filtered = leaders.filter(l => {
                const matchesCat = leaderCategory === 'all' || l.category === leaderCategory;
                const matchesSearch = l.name.toLowerCase().includes(term) || l.title.toLowerCase().includes(term);
                return matchesCat && matchesSearch;
            });

            if(filtered.length === 0) {
                grid.innerHTML = `<div class="text-center p-12 text-gray-400 w-full col-span-2">SonuÃ§ bulunamadÄ±.</div>`;
                return;
            }

            grid.innerHTML = filtered.map((leader, idx) => `
                <div onclick="openLeaderModal('${leader.name}')" class="group bg-white rounded-3xl p-5 shadow-lg border border-slate-100 flex gap-5 items-center cursor-pointer hover:-translate-y-1 hover:shadow-xl transition-all relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br ${leader.gradient} opacity-[0.07] rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-150"></div>
                    <div class="w-16 h-16 shrink-0 rounded-2xl bg-gradient-to-br ${leader.gradient} flex items-center justify-center text-3xl shadow-md text-white ring-4 ring-white">
                        ${leader.imgSymbol}
                    </div>
                    <div class="flex-1 relative z-10">
                        <h3 class="font-bold text-gray-900 text-lg leading-tight group-hover:text-red-700 transition-colors">${leader.name}</h3>
                        <span class="text-[10px] font-bold text-gray-400 uppercase tracking-wider block mt-1 mb-0.5">${leader.title}</span>
                    </div>
                    <i data-lucide="chevron-right" class="text-gray-300 group-hover:text-red-500"></i>
                </div>
            `).join('');
            lucide.createIcons();
        }

        function renderMythology(container) {
            let html = `
                <div class="space-y-8 animate-fade-in pb-20">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-purple-100 text-purple-700 p-2 rounded-lg"><i data-lucide="moon" class="w-6 h-6"></i></span>
                        <h2 class="text-2xl font-bold text-gray-800">TÃ¼rk Mitolojisi</h2>
                    </div>

                    <!-- Kozmoloji -->
                    <div class="bg-slate-900 rounded-3xl p-6 text-white shadow-2xl relative overflow-hidden border border-slate-700">
                        <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"></div>
                        <h3 class="text-xl font-bold mb-4 relative z-10 flex items-center gap-2 text-purple-300"><i data-lucide="globe" class="w-5 h-5"></i> ÃœÃ§ Alem</h3>
                        <div class="space-y-3 relative z-10">
                            <div class="bg-sky-500/20 p-3 rounded-xl border border-sky-500/30">
                                <h4 class="font-bold text-sky-300 text-sm">UÃ§maÄŸ (GÃ¶k)</h4>
                                <p class="text-xs text-sky-100">Ä°yilerin gittiÄŸi yer. GÃ¶k TanrÄ±'nÄ±n mekanÄ±.</p>
                            </div>
                            <div class="bg-emerald-500/20 p-3 rounded-xl border border-emerald-500/30">
                                <h4 class="font-bold text-emerald-300 text-sm">Orta DÃ¼nya (Yer)</h4>
                                <p class="text-xs text-emerald-100">Ä°nsanlarÄ±n yaÅŸadÄ±ÄŸÄ± fiziksel alem.</p>
                            </div>
                            <div class="bg-red-900/40 p-3 rounded-xl border border-red-500/30">
                                <h4 class="font-bold text-red-400 text-sm">Tamu (YeraltÄ±)</h4>
                                <p class="text-xs text-red-200">KÃ¶tÃ¼lerin gittiÄŸi, Erlik Han'Ä±n hÃ¼kÃ¼m sÃ¼rdÃ¼ÄŸÃ¼ yer.</p>
                            </div>
                        </div>
                    </div>

                    <!-- TanrÄ±lar -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><i data-lucide="sun" class="w-5 h-5 text-amber-500"></i> Panteon</h3>
                        <div class="grid grid-cols-1 gap-4">
                            ${mythGods.map(god => `
                                <div class="bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex items-center gap-4">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-br ${god.color} flex items-center justify-center text-white shadow-md">
                                        <i data-lucide="${god.icon}" class="w-6 h-6"></i>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-gray-900">${god.name}</h4>
                                        <span class="text-xs font-bold text-purple-600 uppercase">${god.role}</span>
                                        <p class="text-xs text-gray-500 mt-1">${god.desc}</p>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- YaratÄ±klar -->
                    <div>
                        <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"><i data-lucide="ghost" class="w-5 h-5 text-indigo-500"></i> Efsanevi VarlÄ±klar</h3>
                        <div class="flex gap-3 overflow-x-auto pb-4 scrollbar-hide">
                            ${mythCreatures.map(creature => `
                                <div class="min-w-[200px] bg-white p-4 rounded-2xl shadow-sm border border-slate-100">
                                    <div class="flex justify-between items-start mb-2">
                                        <h4 class="font-bold text-gray-800">${creature.name}</h4>
                                        <span class="text-[10px] bg-slate-100 px-2 py-1 rounded-full font-bold text-slate-500">${creature.type}</span>
                                    </div>
                                    <p class="text-xs text-gray-500 leading-relaxed">${creature.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function renderArt(container) {
            let html = `
                <div class="space-y-8 animate-fade-in">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="bg-teal-100 text-teal-700 p-2 rounded-lg"><i data-lucide="palette" class="w-6 h-6"></i></span>
                        <h2 class="text-2xl font-bold text-gray-800">KÃ¼ltÃ¼r ve Ä°nanÃ§</h2>
                    </div>

                    <!-- Åamanizm -->
                    <div class="bg-gradient-to-br from-indigo-900 to-purple-900 rounded-3xl p-6 text-white shadow-xl relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-8 opacity-20 w-48 h-48 text-white">${getMotifGeyik()}</div>
                        <div class="relative z-10">
                            <div class="flex items-center gap-2 text-purple-300 mb-2 font-bold tracking-widest text-xs uppercase"><i data-lucide="tent" class="w-4 h-4"></i> Åamanizm</div>
                            <h3 class="text-2xl font-bold mb-3">BozkÄ±rÄ±n Ruhu</h3>
                            <p class="text-purple-100 text-sm mb-4 opacity-90">DoÄŸadaki her varlÄ±ÄŸÄ±n bir ruhu olduÄŸuna inanÄ±lÄ±rdÄ±.</p>
                            <div class="flex gap-4">
                                <div class="bg-white/10 p-3 rounded-xl flex flex-col items-center gap-1 w-24"><i data-lucide="trees" class="w-5 h-5 text-green-300"></i><span class="text-[10px]">Hayat AÄŸacÄ±</span></div>
                                <div class="bg-white/10 p-3 rounded-xl flex flex-col items-center gap-1 w-24"><i data-lucide="shield" class="w-5 h-5 text-amber-300"></i><span class="text-[10px]">Demir DaÄŸ</span></div>
                            </div>
                        </div>
                    </div>

                    <!-- PazÄ±rÄ±k HalÄ±sÄ± -->
                    <div>
                        <h3 class="font-bold text-gray-800 mb-3 flex items-center gap-2"><i data-lucide="scroll" class="w-5 h-5 text-red-700"></i> PazÄ±rÄ±k HalÄ±sÄ±</h3>
                        <div class="bg-red-900 p-1 rounded-2xl shadow-lg relative overflow-hidden">
                            <div class="border-[6px] border-amber-600 rounded-xl bg-red-800 relative overflow-hidden h-64 md:h-80 group">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/e/e6/Pazyryk_carpet.jpg" alt="PazÄ±rÄ±k" 
                                     onerror="this.style.display='none'; document.getElementById('fallback-carpet').style.display='flex'"
                                     class="w-full h-full object-cover opacity-90 transition-transform duration-700 group-hover:scale-105">
                                <!-- Fallback -->
                                <div id="fallback-carpet" class="hidden w-full h-full flex-col items-center justify-center p-6 text-center bg-red-900/80 backdrop-blur-md relative">
                                    <div class="absolute inset-0 opacity-10 grid grid-cols-6 grid-rows-4 gap-2 p-2">
                                        ${Array(12).fill(0).map(() => getMotifGeyik()).join('')}
                                    </div>
                                    <div class="z-10 flex flex-col items-center">
                                        <i data-lucide="image-off" class="text-red-300 mb-2 w-8 h-8"></i>
                                        <h4 class="text-white font-bold">GÃ¶rsel YÃ¼klenemedi</h4>
                                        <p class="text-red-100 text-xs">Ancak motifler sanatsal olarak gÃ¶steriliyor.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white p-4 mt-1 rounded-b-xl">
                                <p class="text-xs text-gray-600"><span class="font-bold text-red-800">PazÄ±rÄ±k HalÄ±sÄ±</span> (M.Ã–. 3-5. yy). DÃ¼nyanÄ±n en eski dÃ¼ÄŸÃ¼mlÃ¼ halÄ±sÄ±dÄ±r.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Motifler -->
                    <div>
                        <h3 class="font-bold text-gray-800 mb-4 flex items-center gap-2"><i data-lucide="feather" class="w-5 h-5 text-amber-600"></i> Motiflerin Dili</h3>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-white p-3 rounded-xl shadow-sm border border-stone-100 flex flex-col items-center text-center hover:border-amber-200 transition-colors">
                                <div class="w-16 h-16 text-red-500 mb-2">${getMotifEliBelinde()}</div>
                                <span class="font-bold text-gray-800 text-sm">Eli Belinde</span>
                                <span class="text-[10px] text-gray-500">AnalÄ±k ve Bereket</span>
                            </div>
                            <div class="bg-white p-3 rounded-xl shadow-sm border border-stone-100 flex flex-col items-center text-center hover:border-amber-200 transition-colors">
                                <div class="w-16 h-16 text-blue-600 mb-2">${getMotifKocBoynuzu()}</div>
                                <span class="font-bold text-gray-800 text-sm">KoÃ§ Boynuzu</span>
                                <span class="text-[10px] text-gray-500">GÃ¼Ã§ ve YiÄŸitlik</span>
                            </div>
                            <div class="bg-white p-3 rounded-xl shadow-sm border border-stone-100 flex flex-col items-center text-center hover:border-amber-200 transition-colors">
                                <div class="w-16 h-16 text-green-600 mb-2">${getMotifHayatAgaci()}</div>
                                <span class="font-bold text-gray-800 text-sm">Hayat AÄŸacÄ±</span>
                                <span class="text-[10px] text-gray-500">Ã–lÃ¼msÃ¼zlÃ¼k</span>
                            </div>
                            <div class="bg-white p-3 rounded-xl shadow-sm border border-stone-100 flex flex-col items-center text-center hover:border-amber-200 transition-colors">
                                <div class="w-16 h-16 text-amber-600 mb-2">${getMotifGeyik()}</div>
                                <span class="font-bold text-gray-800 text-sm">Geyik</span>
                                <span class="text-[10px] text-gray-500">Ruhani Rehber</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function renderQuiz(container) {
            const q = quizQuestions[quizState.current];
            let content = '';

            if (quizState.finished) {
                content = `
                    <div class="flex flex-col items-center justify-center h-[60vh] text-center px-4 animate-fade-in">
                        <div class="w-28 h-28 bg-gradient-to-tr from-amber-300 to-yellow-500 rounded-3xl flex items-center justify-center shadow-xl mb-8">
                            <i data-lucide="award" class="w-16 h-16 text-white"></i>
                        </div>
                        <h3 class="text-3xl font-bold text-gray-800 mb-2">MuhteÅŸem!</h3>
                        <p class="text-gray-500 mb-8">Skor: <span class="font-bold text-xl text-teal-600">${quizState.score} / ${quizQuestions.length}</span></p>
                        <button onclick="resetQuiz()" class="bg-gray-900 text-white px-8 py-4 rounded-2xl font-bold flex items-center gap-3 hover:bg-black transition-all shadow-xl">
                            <i data-lucide="rotate-ccw" class="w-5 h-5"></i> Yeniden BaÅŸla
                        </button>
                    </div>
                `;
            } else {
                content = `
                    <div class="animate-slide-up">
                        <div class="flex justify-between items-end mb-8">
                            <div>
                                <span class="text-xs font-bold text-teal-600 uppercase">Bilgi YarÄ±ÅŸmasÄ±</span>
                                <h2 class="text-2xl font-bold text-gray-800">Tarihini SÄ±na</h2>
                            </div>
                            <div class="bg-white px-4 py-2 rounded-2xl shadow-sm border text-sm font-bold text-gray-600">
                                ${quizState.current + 1} / ${quizQuestions.length}
                            </div>
                        </div>
                        <div class="w-full bg-gray-100 h-2 rounded-full mb-8 overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-teal-400 to-blue-500 transition-all duration-500" style="width: ${((quizState.current + 1) / quizQuestions.length) * 100}%"></div>
                        </div>
                        <div class="bg-white p-8 rounded-3xl shadow-xl border border-slate-50">
                            <h3 class="text-xl font-bold text-gray-800 mb-8">${q.q}</h3>
                            <div class="space-y-3">
                                ${q.opts.map((opt, idx) => {
                                    let btnClass = "border-slate-100 text-gray-600 hover:border-teal-300 hover:bg-teal-50";
                                    return `
                                        <button onclick="handleQuizAnswer(${idx}, this)" class="w-full text-left p-4 rounded-xl border-2 transition-all font-medium flex justify-between group bg-white ${btnClass}" ${quizState.selected !== null ? 'disabled' : ''}>
                                            <span>${opt}</span>
                                        </button>
                                    `
                                }).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }
            container.innerHTML = content;
        }

        // --- QUIZ LOGIC ---
        function handleQuizAnswer(idx, btnElement) {
            if (quizState.selected !== null) return;
            quizState.selected = idx;
            const q = quizQuestions[quizState.current];
            const isCorrect = idx === q.a;

            if(isCorrect) {
                quizState.score++;
                btnElement.classList.remove('border-slate-100', 'hover:border-teal-300');
                btnElement.classList.add('border-teal-500', 'bg-teal-50', 'text-teal-800');
            } else {
                btnElement.classList.remove('border-slate-100');
                btnElement.classList.add('border-red-400', 'bg-red-50', 'text-red-800');
            }

            setTimeout(() => {
                if (quizState.current + 1 < quizQuestions.length) {
                    quizState.current++;
                    quizState.selected = null;
                } else {
                    quizState.finished = true;
                }
                renderApp(); 
            }, 1000);
        }

        function resetQuiz() {
            quizState = { current: 0, score: 0, finished: false, selected: null };
            renderApp();
        }

        // --- MODAL LOGIC ---
        function openPeriodModal(idx) {
            const p = periods[idx];
            showModal(p.title, `
                <p class="text-lg text-gray-700 font-medium leading-relaxed border-l-4 border-amber-400 pl-4 py-1 mb-6">${p.shortDesc}</p>
                <div class="space-y-4">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <h4 class="font-bold text-red-800 mb-2 flex gap-2"><i data-lucide="sword" class="w-5 h-5"></i> Askeri</h4>
                        <p class="text-sm text-gray-600">${p.details.military}</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100">
                        <h4 class="font-bold text-teal-700 mb-2 flex gap-2"><i data-lucide="book" class="w-5 h-5"></i> KÃ¼ltÃ¼r</h4>
                        <p class="text-sm text-gray-600">${p.details.culture}</p>
                    </div>
                    <div class="bg-amber-50 p-4 rounded-xl text-sm text-amber-900">
                        <strong>Ã–nemi:</strong> ${p.details.importance}
                    </div>
                </div>
            `, p.gradient);
        }

        function openLeaderModal(leaderName) {
            const l = leaders.find(leader => leader.name === leaderName);
            if (!l) return;
            
            showModal(l.name, `
                <div class="flex flex-col items-center mb-6">
                    <div class="w-24 h-24 rounded-3xl bg-gradient-to-br ${l.gradient} flex items-center justify-center text-5xl shadow-xl text-white mb-3">
                        ${l.imgSymbol}
                    </div>
                    <span class="bg-amber-100 text-amber-800 px-3 py-1 rounded-full font-bold text-xs uppercase">${l.title}</span>
                    <span class="text-gray-400 text-sm mt-1">${l.dates}</span>
                </div>
                <p class="text-gray-700 leading-relaxed text-center text-lg font-medium">${l.desc}</p>
            `, l.gradient);
        }

        function openEpicModal(idx) {
            const epic = epics[idx];
            const gradient = "from-indigo-900 to-purple-900";
            
            showModal(epic.name + " DestanÄ±", `
                <div class="flex flex-col items-center">
                    <div class="bg-amber-50 p-4 rounded-2xl border-l-4 border-amber-500 mb-6 w-full">
                        <p class="text-amber-900 font-serif italic text-center">"${epic.desc}"</p>
                    </div>
                    <div class="prose prose-sm prose-stone text-gray-700 leading-relaxed text-justify">
                        <p>${epic.details}</p>
                    </div>
                    <div class="mt-6 flex gap-2 text-xs text-gray-400">
                        <span class="flex items-center gap-1"><i data-lucide="book-open" class="w-3 h-3"></i> TÃ¼rk Mitolojisi</span>
                    </div>
                </div>
            `, gradient);
        }

        function showModal(title, contentHtml, gradientClass = "from-gray-700 to-gray-900") {
            const overlay = document.getElementById('modal-overlay');
            const header = document.getElementById('modal-header');
            const titleEl = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');

            // Stil ayarla
            header.className = `p-6 flex justify-between items-start text-white relative overflow-hidden shrink-0 bg-gradient-to-r ${gradientClass}`;
            titleEl.innerText = title;
            body.innerHTML = contentHtml;

            // GÃ¶ster
            overlay.classList.remove('hidden');
            setTimeout(() => {
                overlay.classList.remove('opacity-0');
                document.getElementById('modal-content').classList.remove('scale-95');
            }, 10);
            
            lucide.createIcons();
        }

        function closeModal() {
            const overlay = document.getElementById('modal-overlay');
            overlay.classList.add('opacity-0');
            document.getElementById('modal-content').classList.add('scale-95');
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, 300);
        }

    </script>
</body>
</html>